<html>
  <head>
    <script>
        var ws = new WebSocket('ws://35.202.3.15:40510');
        // event emmited when connected
        ws.onopen = function () {
        console.log('websocket is connected ...')
        // sending a send event to websocket server
        ws.send('connected')
        }
        // event emmited when receiving message 
        ws.onmessage = function (ev) {
        var data
        try {
            data = JSON.parse(ev.data)
        } catch (err) {
            data = ev.data
        }
        console.log(data)
        }
    </script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.3/semantic.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.12/handlebars.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.3/semantic.css" />
    <script>
        getMyKey((myKey)=>{
            console.log(myKey)
            $('.menu .item').tab()
            var source = document.getElementById("entry-template").innerHTML
            var template = Handlebars.compile(source)
            var context = {title: "My New Post", body: "This is my first post!"};
            var html = template(context);
            $(".handlebars").html(html)
            getForSale((items)=>{
                console.log(items)
            })
        })
        
        function getMyKey(cb){
            $.get( "http://127.0.0.1:4000/key", function(data) {
                return cb(data)
            })
        } 
        function getForSale(cb){
            $.get( "http://127.0.0.1:4000/forsale", function(data) {
                return cb(data)
            })
        }  
    </script>
    <script id="entry-template" type="text/x-handlebars-template">
        <div class="entry">
            <h1>{{title}}</h1>
            <div class="body">
            {{body}}
            </div>
        </div>
    </script>
  </head>
  <body>
    <div class="ui top attached tabular menu">
        <a class="item" data-tab="first">My Emblems</a>
        <a class="item" data-tab="second">For Sale</a>
        <a class="item active" data-tab="third">Offers</a>
    </div>
    <div class="ui bottom attached tab segment" data-tab="first">
        <div class="ui relaxed divided list">
            <div class="item">
                <i class="large github middle aligned icon"></i>
                <div class="content">
                <a class="header">Semantic-Org/Semantic-UI</a>
                <div class="description">Updated 10 mins ago</div>
                </div>
            </div>
            <div class="item">
                <i class="large github middle aligned icon"></i>
                <div class="content">
                <a class="header">Semantic-Org/Semantic-UI-Docs</a>
                <div class="description">Updated 22 mins ago</div>
                </div>
            </div>
            <div class="item">
                <i class="large github middle aligned icon"></i>
                <div class="content">
                <a class="header">Semantic-Org/Semantic-UI-Meteor</a>
                <div class="description">Updated 34 mins ago</div>
                </div>
            </div>
            </div>
    </div>
    <div class="ui bottom attached tab segment" data-tab="second">
        <div class="handlebars"></div>
    </div>
    <div class="ui bottom attached tab segment active" data-tab="third">
        Third
    </div>
    
  </body>
</html>